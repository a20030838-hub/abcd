<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>THE AMBASSADOR - Premium Selection</title>
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&family=Playfair+Display:ital,wght@0,400;0,600;0,800;1,400&display=swap" rel="stylesheet">
    <style>
        /* [기존 스타일 유지] */
        :root { --bg-color: #ffffff; --text-main: #111111; --text-sub: #555555; --accent: #D4AF37; --light-gray: #f4f4f4; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Lato', sans-serif; color: var(--text-main); background-color: var(--bg-color); line-height: 1.6; }
        h1, h2, h3, .brand-font { font-family: 'Playfair Display', serif; }
        a { text-decoration: none; color: inherit; transition: all 0.3s ease; cursor: pointer; }
        ul { list-style: none; }
        button { border: none; background: none; cursor: pointer; font-family: 'Lato', sans-serif; }
        
        .hidden { display: none !important; }
        .fade-in { animation: fadeIn 0.8s ease forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .container { max-width: 1400px; margin: 0 auto; padding: 0 40px; }

        /* HEADER */
        header { position: fixed; top: 0; width: 100%; height: 90px; display: flex; justify-content: space-between; align-items: center; padding: 0 60px; z-index: 1000; background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px); border-bottom: 1px solid rgba(0,0,0,0.05); }
        .logo { font-size: 24px; font-weight: 700; letter-spacing: 2px; text-transform: uppercase; }
        .nav-menu { display: flex; gap: 40px; }
        .nav-menu a { font-size: 14px; text-transform: uppercase; letter-spacing: 1px; font-weight: 500; }
        .auth-area { font-size: 14px; display: flex; align-items: center; gap: 20px; }
        .btn-auth { text-transform: uppercase; letter-spacing: 1px; font-weight: 700; font-size: 12px; }
        
        /* HERO & SECTIONS */
        .hero { height: 100vh; background: url('https://images.unsplash.com/photo-1469334031218-e382a71b716b?q=80&w=2070') no-repeat center/cover; display: flex; align-items: center; justify-content: center; position: relative; }
        .hero::after { content: ''; position: absolute; inset: 0; background: rgba(0,0,0,0.2); }
        .hero-content { position: relative; z-index: 2; text-align: center; color: white; }
        .hero h1 { font-size: 4rem; margin-bottom: 20px; font-weight: 400; letter-spacing: 3px; }
        .btn-main { padding: 15px 50px; border: 1px solid white; color: white; text-transform: uppercase; letter-spacing: 2px; font-size: 12px; transition: 0.3s; }
        .btn-main:hover { background: white; color: black; }
        
        .section-header { text-align: center; margin: 100px 0 60px; }
        .section-title { font-size: 3rem; font-weight: 400; margin-bottom: 15px; }

        .amb-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 40px; }
        .amb-card { text-align: center; }
        .amb-img-wrap { width: 200px; height: 200px; margin: 0 auto 20px; border-radius: 50%; overflow: hidden; }
        .amb-img { width: 100%; height: 100%; object-fit: cover; }

        .prod-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 60px 30px; margin-bottom: 100px; }
        .prod-img-box { width: 100%; height: 400px; overflow: hidden; margin-bottom: 20px; background-color: var(--light-gray); }
        .prod-img { width: 100%; height: 100%; object-fit: cover; }
        .prod-meta { text-align: center; }
        .prod-title { font-size: 1.2rem; margin-bottom: 8px; font-family: 'Playfair Display', serif; }

        /* AUTH FORMS */
        .auth-wrapper { min-height: 80vh; display: flex; align-items: center; justify-content: center; background-color: var(--light-gray); margin-top: 90px; }
        .auth-box { background: white; width: 100%; max-width: 450px; padding: 60px; box-shadow: 0 20px 50px rgba(0,0,0,0.05); text-align: center; }
        .input-group { margin-bottom: 25px; text-align: left; }
        .custom-input { width: 100%; padding: 10px 0; border: none; border-bottom: 1px solid #ddd; outline: none; font-family: 'Playfair Display', serif; }
        .btn-submit { width: 100%; padding: 18px; background: black; color: white; text-transform: uppercase; letter-spacing: 2px; font-size: 12px; margin-top: 20px; }

        /* --- [NEW] ADMIN DASHBOARD STYLES --- */
        .admin-container { padding-top: 150px; padding-bottom: 100px; min-height: 100vh; background: #f8f9fa; }
        .admin-header { display: flex; justify-content: space-between; align-items: flex-end; margin-bottom: 40px; border-bottom: 2px solid #111; padding-bottom: 20px; }
        
        /* Stats Cards */
        .stats-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-bottom: 50px; }
        .stat-card { background: white; padding: 30px; border-radius: 0; box-shadow: 0 5px 15px rgba(0,0,0,0.03); }
        .stat-label { font-size: 12px; text-transform: uppercase; letter-spacing: 1px; color: #888; margin-bottom: 10px; }
        .stat-value { font-size: 3rem; font-weight: 700; font-family: 'Playfair Display', serif; color: var(--text-main); }

        /* User Table */
        .table-container { background: white; padding: 40px; box-shadow: 0 5px 15px rgba(0,0,0,0.03); }
        .admin-table { width: 100%; border-collapse: collapse; }
        .admin-table th { text-align: left; padding: 20px; border-bottom: 2px solid #eee; font-size: 11px; text-transform: uppercase; letter-spacing: 1px; color: #888; }
        .admin-table td { padding: 20px; border-bottom: 1px solid #eee; font-size: 14px; }
        .admin-table tr:last-child td { border-bottom: none; }
        .role-badge { padding: 5px 10px; background: #eee; border-radius: 4px; font-size: 11px; font-weight: 700; text-transform: uppercase; }
        .role-ambassador { background: var(--accent); color: white; }
    </style>
</head>
<body>

    <!-- 헤더 -->
    <header>
        <div class="logo"><a onclick="app.router('home')">The Ambassador</a></div>
        <nav class="nav-menu" id="nav-menu">
            <a onclick="app.router('home')">Home</a>
            <a href="#ambassadors">Curators</a>
            <a href="#collection">Collection</a>
        </nav>
        <div class="auth-area" id="auth-area"></div>
    </header>

    <!-- [1] HOME -->
    <main id="view-home">
        <section class="hero">
            <div class="hero-content fade-in">
                <h1>Taste of Elegance</h1>
                <p>프리미엄 큐레이션 마켓</p>
                <button class="btn-main" onclick="document.getElementById('collection').scrollIntoView({behavior:'smooth'})">Explore</button>
            </div>
        </section>
        <div class="container">
            <div class="section-header" id="ambassadors"><h2 class="section-title">The Curators</h2></div>
            <div class="amb-grid" id="amb-list"></div>
            <div class="section-header" id="collection" style="margin-top:150px;"><h2 class="section-title">Masterpiece</h2></div>
            <div class="prod-grid" id="prod-list"></div>
        </div>
    </main>

    <!-- [2] LOGIN -->
    <main id="view-login" class="hidden">
        <div class="auth-wrapper">
            <div class="auth-box fade-in">
                <div class="auth-header"><h2>Sign In</h2><p>관리자 ID: admin / PW: 1234</p></div>
                <form onsubmit="app.handleLogin(event)">
                    <div class="input-group">
                        <label>User ID</label>
                        <input type="text" id="login-id" class="custom-input" placeholder="ID 입력" required>
                    </div>
                    <div class="input-group">
                        <label>Password</label>
                        <input type="password" id="login-pw" class="custom-input" placeholder="비밀번호 입력" required>
                    </div>
                    <button type="submit" class="btn-submit">Login</button>
                </form>
                <div style="margin-top:20px; font-size:13px;">
                    회원이 아니신가요? <span onclick="app.router('signup')" style="cursor:pointer; text-decoration:underline;">회원가입</span>
                </div>
            </div>
        </div>
    </main>

    <!-- [3] SIGNUP -->
    <main id="view-signup" class="hidden">
        <div class="auth-wrapper">
            <div class="auth-box fade-in">
                <div class="auth-header"><h2>Membership</h2><p>럭셔리 멤버십 가입</p></div>
                <form onsubmit="app.handleSignup(event)">
                    <div class="input-group">
                        <label>Name</label>
                        <input type="text" id="sign-name" class="custom-input" required>
                    </div>
                    <div class="input-group">
                        <label>User ID</label>
                        <input type="text" id="sign-id" class="custom-input" required>
                    </div>
                    <div class="input-group">
                        <label>Password</label>
                        <input type="password" id="sign-pw" class="custom-input" required>
                    </div>
                    <div class="input-group">
                        <label>Role Type</label>
                        <select id="sign-role" class="custom-input" style="background:none;">
                            <option value="Member">General Member</option>
                            <option value="Ambassador">Ambassador (Seller)</option>
                        </select>
                    </div>
                    <button type="submit" class="btn-submit">Join Now</button>
                </form>
            </div>
        </div>
    </main>

    <!-- [4] ADMIN DASHBOARD (NEW) -->
    <main id="view-admin" class="hidden">
        <div class="container admin-container">
            <div class="admin-header">
                <div>
                    <h2 class="section-title" style="margin:0; font-size:2.5rem;">Admin Dashboard</h2>
                    <p style="color:#666;">전체 회원 및 플랫폼 현황 관리</p>
                </div>
                <button class="btn-auth" onclick="app.logout()">Logout</button>
            </div>

            <!-- 통계 카드 -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-label">Total Users</div>
                    <div class="stat-value" id="stat-total">0</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Ambassadors</div>
                    <div class="stat-value" id="stat-amb">0</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Today's Visitors</div>
                    <div class="stat-value">1,204</div>
                </div>
            </div>

            <!-- 회원 리스트 테이블 -->
            <div class="table-container">
                <h3 style="margin-bottom:20px; font-size:1.2rem;">Registered Members</h3>
                <table class="admin-table">
                    <thead>
                        <tr>
                            <th>No.</th>
                            <th>User Name</th>
                            <th>User ID</th>
                            <th>Role</th>
                            <th>Date</th>
                        </tr>
                    </thead>
                    <tbody id="user-table-body">
                        <!-- JS Rendered -->
                    </tbody>
                </table>
            </div>
        </div>
    </main>

    <script>
        const app = {
            data: {
                ambassadors: [
                    { name: 'Chloe Kim', role: 'Fashion', img: 'https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=500' },
                    { name: 'David Lee', role: 'Interior', img: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=500' },
                    { name: 'Sarah Park', role: 'Beauty', img: 'https://images.unsplash.com/photo-1534528741775-53994a69daeb?w=500' },
                    { name: 'James Han', role: 'Tech', img: 'https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=500' }
                ],
                products: [
                    { brand: 'Chloe\'s Pick', title: 'Trench Coat', price: '280,000', img: 'https://images.unsplash.com/photo-1591047139829-d91aecb6caea?w=600' },
                    { brand: 'David\'s Pick', title: 'Wood Chair', price: '450,000', img: 'https://images.unsplash.com/photo-1592078615290-033ee584e267?w=600' },
                    { brand: 'Sarah\'s Pick', title: 'Niche Perfume', price: '185,000', img: 'https://images.unsplash.com/photo-1541643600914-78b084683601?w=600' },
                    { brand: 'James\'s Pick', title: 'Film Camera', price: '820,000', img: 'https://images.unsplash.com/photo-1526170375885-4d8ecf77b99f?w=600' }
                ]
            },

            init: function() {
                this.renderContent();
                this.checkSession();
                
                // 새로고침해도 관리자면 관리자 페이지 유지
                const session = JSON.parse(localStorage.getItem('amb_session'));
                if(session && session.id === 'admin') {
                    this.renderAdmin();
                    this.router('admin');
                } else {
                    this.router('home');
                }
            },

            router: function(viewName) {
                document.querySelectorAll('main').forEach(el => el.classList.add('hidden'));
                const target = document.getElementById(`view-${viewName}`);
                target.classList.remove('hidden');
                
                if(viewName === 'admin') {
                    document.getElementById('nav-menu').style.display = 'none'; // 관리자 뷰에선 메뉴 숨김
                } else {
                    document.getElementById('nav-menu').style.display = 'flex';
                }

                window.scrollTo(0, 0);
            },

            renderContent: function() {
                // 앰버서더 렌더링
                document.getElementById('amb-list').innerHTML = this.data.ambassadors.map(a => `
                    <div class="amb-card">
                        <div class="amb-img-wrap"><img src="${a.img}" class="amb-img"></div>
                        <h3 class="amb-name">${a.name}</h3><p style="color:#888; text-transform:uppercase; font-size:11px;">${a.role}</p>
                    </div>`).join('');
                
                // 상품 렌더링
                document.getElementById('prod-list').innerHTML = this.data.products.map(p => `
                    <div class="prod-card">
                        <div class="prod-img-box"><img src="${p.img}" class="prod-img"></div>
                        <div class="prod-meta">
                            <span style="font-size:10px; color:var(--accent); text-transform:uppercase;">${p.brand}</span>
                            <h4 class="prod-title">${p.title}</h4><p style="color:#666;">KRW ${p.price}</p>
                        </div>
                    </div>`).join('');
            },

            // --- AUTH & ADMIN LOGIC ---
            checkSession: function() {
                const session = JSON.parse(localStorage.getItem('amb_session'));
                const ui = document.getElementById('auth-area');
                if (session) {
                    ui.innerHTML = `<span style="font-weight:700;">${session.name}</span> <button class="btn-auth" onclick="app.logout()" style="margin-left:15px;">Logout</button>`;
                } else {
                    ui.innerHTML = `<button class="btn-auth" onclick="app.router('login')">Sign In</button>`;
                }
            },

            handleSignup: function(e) {
                e.preventDefault();
                const name = document.getElementById('sign-name').value;
                const id = document.getElementById('sign-id').value;
                const pw = document.getElementById('sign-pw').value;
                const role = document.getElementById('sign-role').value; // Role 추가
                
                let users = JSON.parse(localStorage.getItem('amb_users')) || [];
                if(users.find(u => u.id === id)) { alert('이미 존재하는 ID입니다.'); return; }
                
                // 날짜 추가
                const date = new Date().toLocaleDateString();
                
                users.push({ name, id, pw, role, date });
                localStorage.setItem('amb_users', JSON.stringify(users));
                
                alert('회원가입이 완료되었습니다.');
                this.router('login');
            },

            handleLogin: function(e) {
                e.preventDefault();
                const id = document.getElementById('login-id').value;
                const pw = document.getElementById('login-pw').value;
                
                // [관리자 특수 로그인 처리]
                if (id === 'admin' && pw === '1234') {
                    const adminUser = { name: 'Administrator', id: 'admin', role: 'ADMIN' };
                    localStorage.setItem('amb_session', JSON.stringify(adminUser));
                    alert('관리자 모드로 접속합니다.');
                    this.renderAdmin();
                    this.router('admin');
                    return;
                }

                // 일반 유저 로그인
                const users = JSON.parse(localStorage.getItem('amb_users')) || [];
                const user = users.find(u => u.id === id && u.pw === pw);
                
                if(user) {
                    localStorage.setItem('amb_session', JSON.stringify(user));
                    this.checkSession();
                    this.router('home');
                } else {
                    alert('ID 또는 비밀번호를 확인해주세요.');
                }
            },

            // [관리자 페이지 렌더링 함수]
            renderAdmin: function() {
                const users = JSON.parse(localStorage.getItem('amb_users')) || [];
                
                // 통계 계산
                document.getElementById('stat-total').innerText = users.length;
                const ambCount = users.filter(u => u.role === 'Ambassador').length;
                document.getElementById('stat-amb').innerText = ambCount;

                // 테이블 렌더링
                const tbody = document.getElementById('user-table-body');
                if(users.length === 0) {
                    tbody.innerHTML = `<tr><td colspan="5" style="text-align:center;">가입된 회원이 없습니다.</td></tr>`;
                    return;
                }

                tbody.innerHTML = users.map((u, index) => `
                    <tr>
                        <td>${index + 1}</td>
                        <td style="font-weight:700;">${u.name}</td>
                        <td>${u.id}</td>
                        <td><span class="role-badge ${u.role === 'Ambassador' ? 'role-ambassador' : ''}">${u.role}</span></td>
                        <td style="color:#888;">${u.date}</td>
                    </tr>
                `).join('');
                
                this.checkSession(); // 상단 로그아웃 버튼 갱신
            },

            logout: function() {
                localStorage.removeItem('amb_session');
                this.checkSession();
                this.router('home');
            }
        };

        app.init();
    </script>
</body>
</html>
